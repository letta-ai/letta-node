/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../mock-server/MockServerPool";
import { LettaClient } from "../../../src/Client";

describe("Properties", () => {
    test("upsert", async () => {
        const server = mockServerPool.createServer();
        const client = new LettaClient({ token: "test", project: "test", environment: server.baseUrl });
        const rawRequestBody = [{ key: "key", value: "value", type: "string" }];
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .put("/v1/identities/identity_id/properties")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.identities.properties.upsert("identity_id", [
            {
                key: "key",
                value: "value",
                type: "string",
            },
        ]);
        expect(response).toEqual({
            key: "value",
        });
    });
});
